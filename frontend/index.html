<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <title>Connect to Wi-Fi</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="css/style.css"
    />
  </head>
  <body>
    <div class="wrap">
      <img
        src="public/logo.png"
        alt="Botanika Logo"
        class="logo"
      />
      <h1>Connect to Wi-Fi</h1>

      <!-- Tabs -->
      <div class="tabs">
        <button
          class="tab active"
          onclick="switchTab('wifi')"
        >
          WiFi
        </button>
        <button
          class="tab"
          onclick="switchTab('system')"
        >
          System
        </button>
      </div>

      <!-- WiFi Tab -->
      <div
        id="wifiTab"
        class="tab-content active"
      >
        <div
          id="currentConnection"
          style="display: none"
        >
          <!-- Current connection info will be injected here -->
        </div>

        <!-- Saved Networks -->
        <div
          id="savedNetworksSection"
          style="display: none"
        >
          <div class="section-title">My Networks</div>
          <div
            id="savedNetworksList"
            class="saved-networks-list"
          ></div>
        </div>

        <div class="form-group">
          <button
            id="scanBtn"
            class="scan"
          >
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4 12C4 16.4183 7.58172 20 12 20C14.2091 20 16.2091 19.1046 17.6569 17.6569L16.2426 16.2426C15.2116 17.2736 13.6893 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C13.6893 6 15.2116 6.72639 16.2426 7.75736L17.6569 6.34315C16.2091 4.89543 14.2091 4 12 4C7.58172 4 4 7.58172 4 12Z"
                fill="currentColor"
              />
              <path
                d="M18 12C18 9.79086 16.2091 8 14 8V10C15.1046 10 16 10.8954 16 12C16 13.1046 15.1046 14 14 14V16C16.2091 16 18 14.2091 18 12Z"
                fill="currentColor"
              />
            </svg>
            Rescan
          </button>
        </div>

        <div class="list-container">
          <div
            id="ssidList"
            class="list"
          >
            <div class="empty-state">Scanning for Wi-Fi networks...</div>
          </div>
          <div
            id="scanningOverlay"
            class="scanning-overlay"
          >
            <div class="loader"></div>
          </div>
        </div>

        <div class="form-group">
          <label for="ssidInput">Network Name (SSID)</label>
          <input
            id="ssidInput"
            placeholder="Enter SSID"
          />
        </div>

        <div class="form-group">
          <label for="pwdInput">Password</label>
          <div class="password-wrapper">
            <input
              id="pwdInput"
              type="password"
              placeholder="Enter password (if any)"
            />
            <span
              class="toggle-password"
              onclick="togglePassword()"
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z"
                  fill="currentColor"
                  class="eye-open"
                />
                <path
                  d="M12 7C14.76 7 17 9.24 17 12C17 12.65 16.87 13.26 16.64 13.83L19.56 16.75C21.07 15.49 22.26 13.86 22.99 12C21.26 7.61 16.99 4.5 11.99 4.5C10.59 4.5 9.25 4.75 8.01 5.2L10.17 7.36C10.74 7.13 11.35 7 12 7ZM2 4.27L4.28 6.55L4.74 7.01C3.08 8.3 1.78 10.02 1 12C2.73 16.39 7 19.5 12 19.5C13.55 19.5 15.03 19.2 16.38 18.66L16.8 19.08L19.73 22L21 20.73L3.27 3L2 4.27ZM7.53 9.8L9.08 11.35C9.03 11.56 9 11.78 9 12C9 13.66 10.34 15 12 15C12.22 15 12.44 14.97 12.65 14.92L14.2 16.47C13.53 16.8 12.79 17 12 17C9.24 17 7 14.76 7 12C7 11.21 7.2 10.47 7.53 9.8ZM11.84 9.02L14.99 12.17L15.01 12.01C15.01 10.35 13.67 9.01 12.01 9.01L11.84 9.02Z"
                  fill="currentColor"
                  class="eye-closed"
                  style="display: none"
                />
              </svg>
            </span>
          </div>
        </div>

        <button
          id="connectBtn"
          class="connect"
        >
          <span>Connect</span><span class="loader"></span>
        </button>

        <p
          id="result"
          class="muted"
        ></p>
        <p
          id="success"
          class="ok"
        ></p>
        <p id="error"></p>
      </div>
      <!-- End WiFi Tab -->

      <!-- System Tab -->
      <div
        id="systemTab"
        class="tab-content"
      >
        <div class="section-title">Access Point Settings</div>

        <div
          id="apInfo"
          style="margin-bottom: 16px; color: #a0a6b0; font-size: 13px"
        >
          Loading AP info...
        </div>

        <div class="form-group">
          <label for="apPasswordInput">New AP Password</label>
          <div class="password-wrapper">
            <input
              id="apPasswordInput"
              type="password"
              placeholder="Enter new password (8-63 characters)"
            />
            <span
              class="toggle-password"
              onclick="toggleAPPassword()"
            >
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z"
                  fill="currentColor"
                  class="eye-open-ap"
                />
                <path
                  d="M12 7C14.76 7 17 9.24 17 12C17 12.65 16.87 13.26 16.64 13.83L19.56 16.75C21.07 15.49 22.26 13.86 22.99 12C21.26 7.61 16.99 4.5 11.99 4.5C10.59 4.5 9.25 4.75 8.01 5.2L10.17 7.36C10.74 7.13 11.35 7 12 7ZM2 4.27L4.28 6.55L4.74 7.01C3.08 8.3 1.78 10.02 1 12C2.73 16.39 7 19.5 12 19.5C13.55 19.5 15.03 19.2 16.38 18.66L16.8 19.08L19.73 22L21 20.73L3.27 3L2 4.27ZM7.53 9.8L9.08 11.35C9.03 11.56 9 11.78 9 12C9 13.66 10.34 15 12 15C12.22 15 12.44 14.97 12.65 14.92L14.2 16.47C13.53 16.8 12.79 17 12 17C9.24 17 7 14.76 7 12C7 11.21 7.2 10.47 7.53 9.8ZM11.84 9.02L14.99 12.17L15.01 12.01C15.01 10.35 13.67 9.01 12.01 9.01L11.84 9.02Z"
                  fill="currentColor"
                  class="eye-closed-ap"
                  style="display: none"
                />
              </svg>
            </span>
          </div>
        </div>

        <button
          id="changeAPPasswordBtn"
          class="connect"
        >
          <span>Change Password</span><span class="loader"></span>
        </button>

        <p
          id="apResult"
          class="muted"
        ></p>
        <p
          id="apSuccess"
          class="ok"
        ></p>
        <p id="apError"></p>
      </div>
      <!-- End System Tab -->

      <!-- Fan Tab -->
      <div
        id="fanTab"
        class="tab-content"
      >
        <div class="section-title">Fan Control</div>

        <div
          id="fanStatus"
          style="margin-bottom: 16px; color: #a0a6b0; font-size: 13px"
        >
          Loading fan status...
        </div>

        <div class="fan-controls">
          <button
            id="fanToggleBtn"
            class="fan-btn fan-toggle"
            onclick="toggleFan()"
          >
            <span>Toggle Fan</span><span class="loader"></span>
          </button>

          <div class="fan-speed-controls">
            <label style="color: #a0a6b0; font-size: 13px; font-weight: 500; margin-bottom: 12px; display: block"
              >Fan Speed</label
            >
            <div class="speed-buttons">
              <button
                class="speed-btn"
                onclick="setFanSpeed(0)"
                data-speed="0"
              >
                Off
              </button>
              <button
                class="speed-btn"
                onclick="setFanSpeed(1)"
                data-speed="1"
              >
                Low
              </button>
              <button
                class="speed-btn"
                onclick="setFanSpeed(2)"
                data-speed="2"
              >
                Med
              </button>
              <button
                class="speed-btn"
                onclick="setFanSpeed(3)"
                data-speed="3"
              >
                High
              </button>
            </div>
          </div>
        </div>

        <p
          id="fanSuccess"
          class="ok"
        ></p>
        <p id="fanError"></p>
      </div>
      <!-- End Fan Tab -->
    </div>

    <!-- Disconnect Confirmation Modal -->
    <div
      id="disconnectModal"
      class="modal"
    >
      <div class="modal-content">
        <h3>Disconnect WiFi?</h3>
        <p>This will disconnect and forget the current network.</p>
        <div class="modal-buttons">
          <button
            class="modal-btn modal-btn-cancel"
            onclick="closeDisconnectModal()"
          >
            Cancel
          </button>
          <button
            class="modal-btn modal-btn-confirm"
            onclick="disconnectCurrent()"
          >
            Disconnect
          </button>
        </div>
      </div>
    </div>

    <script src="js/app.js"></script>
  </body>
</html>
